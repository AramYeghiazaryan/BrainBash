<html lang="en" xmlns:th="http://www.thymeleaf.org">

<style>
.menu-section{
float:left;
width:1000px;
overflow-y: auto;
height: 100px;
}

</style>

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/testMenuStyle.css}">


    <script
            src="https://code.jquery.com/jquery-3.3.1.js"
            integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
            crossorigin="anonymous">

</script>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>



</head>
<body>


<div id="gradient" />

<div class="menu-section">
  <div class="menu-toggle">
    <div class="one"></div>
    <div class="two"></div>
    <div class="three"></div>
  </div>


  <div class='console-container'><span id='text'></span><div class='console-underscore' id='console'>&#95;</div></div>


  <nav class="navig">
		<ul role="navigation" class="hidden">
			<li class="sub-menu" >
                           <a href='#category'>
                            <div class='fa fa-gear'></div>
                              Category:
                            <div class='fa fa-caret-down right' ></div>
                            </a>

                                 <ul  id='categoryMenu'>

                                  <button name="editOptions" id="editOptions">Select </button>
                                 </ul>


                       </li>
			            <li class="sub-menu" >
                           <a href='#subcategory'>
                            <div class='fa fa-gear'></div>
                              SubCategory:
                            <div class='fa fa-caret-down right' ></div>
                            </a>

                                 <ul  id='subcategoryMenu'>
                                 </ul>

                       </li>

			<li class="sub-menu" >
               <a href='#topic'>
                <div class='fa fa-gear'></div>
                  Topics:
                <div class='fa fa-caret-down right' ></div>
                </a>

                     <ul  id='topicMenu'>
                     </ul>

           </li>
		</ul>
	</nav>

</div>
<script>

   $(".menu-toggle").on('click', function() {
     $(this).toggleClass("on");
     $('.menu-section').toggleClass("on");
     $("nav ul").toggleClass('hidden');
   });

      $('.sub-menu ul').hide();
        $(".sub-menu a").click(function () {
            $(this).parent(".sub-menu").children("ul").slideToggle("100");
            $(this).find(".right").toggleClass("fa-caret-up fa-caret-down");
        });


 let topics;

 $.get('/topic/all', function (categories) {
        topics=categories;
    });

 let subcategories;

    $.get('/category', function (categories) {
           loadCategories(categories);
       });



     $.get('/subcategory', function (categories) {
               subcategories=categories;
           });

     let categoryChecked=[];
     let subcategoryChecked=[];

    function loadCategories(array) {
           let main = $("#categoryMenu");


          for(let i=0;i<array.length;i++) {
            main.
            append($("<li>")
            .append("<a href='#" + array[i].id + "'><span>" + array[i].type + "</span> <input type='checkbox' name='cat' id='"+i+"' ></a>")
            .append()
            .append("</li>"));
            }
       }

        $().ready(function() {
                $('#editOptions').click(function() {
                    categoryChecked.length=0;
                    $.each($("input[name='cat']:checked"), function(){

                        categoryChecked.push($(this).attr("id"));
                   });

                let main = $("#subcategoryMenu");
                main.empty();
                main.append($("<button name='edit' id='edit'>Select </button>"));
                for(let i=0;i<subcategories.length;i++) {
                    for(let j=0;j<categoryChecked.length;j++){

                       // console.log(categoryChecked[j]+1);

                        if(parseInt(categoryChecked[j])+1==subcategories[i].categoryId){
                           main
                             .append($("<li>")
                             .append("<a href='#" + subcategories[i].id + "'><span>" + subcategories[i].typeName + "</span> <input type='checkbox' name='sub' id='"+i+"' ></a>")
                             .append()
                             .append("</li>"));

                    }
                }
              }

                $('#edit').click(function() {
                   subcategoryChecked.length=0;
                   $.each($("input[name='sub']:checked"), function(){

                     subcategoryChecked.push($(this).attr("id"));

                   });

                   let topic = $("#topicMenu");

                   topic.empty();
                         for(let i=0;i<topics.length;i++) {
                             for(let j=0;j<subcategoryChecked.length;j++){
                              if(parseInt(subcategoryChecked[j])+1 === topics[i].subCategoryId){
                                 topic
                                   .append($("<li>")
                                   .append("<a href='/test/menu/" + topics[i].id + "'><span>" + topics[i].topicName + "</span></a>")
                                   .append()
                                   .append("</li>"));

                               }
                        }
                   }

            });
        });
});

</script>

<!-- BeckGround -->
<script>

var colors = new Array(
  [62,35,255],
  [60,255,60],
  [255,35,98],
  [45,175,230],
  [255,0,255],
  [255,128,0]);

var step = 0;
//color table indices for:
// current color left
// next color left
// current color right
// next color right
var colorIndices = [0,1,2,3];

//transition speed
var gradientSpeed = 0.002;

function updateGradient()
{

  if ( $===undefined ) return;

var c0_0 = colors[colorIndices[0]];
var c0_1 = colors[colorIndices[1]];
var c1_0 = colors[colorIndices[2]];
var c1_1 = colors[colorIndices[3]];

var istep = 1 - step;
var r1 = Math.round(istep * c0_0[0] + step * c0_1[0]);
var g1 = Math.round(istep * c0_0[1] + step * c0_1[1]);
var b1 = Math.round(istep * c0_0[2] + step * c0_1[2]);
var color1 = "rgb("+r1+","+g1+","+b1+")";

var r2 = Math.round(istep * c1_0[0] + step * c1_1[0]);
var g2 = Math.round(istep * c1_0[1] + step * c1_1[1]);
var b2 = Math.round(istep * c1_0[2] + step * c1_1[2]);
var color2 = "rgb("+r2+","+g2+","+b2+")";

 $('#gradient').css({
   background: "-webkit-gradient(linear, left top, right top, from("+color1+"), to("+color2+"))"}).css({
    background: "-moz-linear-gradient(left, "+color1+" 0%, "+color2+" 100%)"});

  step += gradientSpeed;
  if ( step >= 1 )
  {
    step %= 1;
    colorIndices[0] = colorIndices[1];
    colorIndices[2] = colorIndices[3];

    //pick two new target color indices
    //do not pick the same as the current one
    colorIndices[1] = ( colorIndices[1] + Math.floor( 1 + Math.random() * (colors.length - 1))) % colors.length;
    colorIndices[3] = ( colorIndices[3] + Math.floor( 1 + Math.random() * (colors.length - 1))) % colors.length;

  }
}

setInterval(updateGradient,10);
</script>


<!-- Text -->

<script>
// function([string1, string2],target id,[color1,color2])
 consoleText(['Let\'s Check Your Brain.', 'Choose The Test.', 'Click The Button On The Right Side.'], 'text',['white','rebeccapurple','lightblue']);

function consoleText(words, id, colors) {
  if (colors === undefined) colors = ['#fff'];
  var visible = true;
  var con = document.getElementById('console');
  var letterCount = 1;
  var x = 1;
  var waiting = false;
  var target = document.getElementById(id)
  target.setAttribute('style', 'color:' + colors[0])
  window.setInterval(function() {

    if (letterCount === 0 && waiting === false) {
      waiting = true;
      target.innerHTML = words[0].substring(0, letterCount)
      window.setTimeout(function() {
        var usedColor = colors.shift();
        colors.push(usedColor);
        var usedWord = words.shift();
        words.push(usedWord);
        x = 1;
        target.setAttribute('style', 'color:' + colors[0])
        letterCount += x;
        waiting = false;
      }, 1000)
    } else if (letterCount === words[0].length + 1 && waiting === false) {
      waiting = true;
      window.setTimeout(function() {
        x = -1;
        letterCount += x;
        waiting = false;
      }, 1000)
    } else if (waiting === false) {
      target.innerHTML = words[0].substring(0, letterCount)
      letterCount += x;
    }
  }, 120)
  window.setInterval(function() {
    if (visible === true) {
      con.className = 'console-underscore hidden'
      visible = false;

    } else {
      con.className = 'console-underscore'

      visible = true;
    }
  }, 400)
}

</script>


</body>
</html>